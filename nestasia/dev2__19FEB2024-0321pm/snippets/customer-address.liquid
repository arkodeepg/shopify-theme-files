<div class="bottompad-section clearfix">
  <div id="addresses" class="twelve">
    <div class="container">
      <div class="address-header-wapper">
        <div class="my-address-header">
          <span class="icon">
            <svg width="20" height="19" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M9.796.02a.417.417 0 0 0-.253.086L.155 7.433a.412.412 0 0 0-.069.575.412.412 0 0 0 .575.07l.563-.44v10.73a.41.41 0 0 0 .409.408h5.714v-7.347h4.898v7.347h5.714a.41.41 0 0 0 .408-.409V7.637l.564.44a.41.41 0 0 0 .575-.07.412.412 0 0 0-.07-.574L10.05.106a.417.417 0 0 0-.253-.085zm4.082 1.613v.429l2.449 1.91v-2.34h-2.45z"
                fill="#3F414D" fill-rule="nonzero"></path>
            </svg>
          </span>
          <span>
            MY ADDRESSES
          </span>
        </div>
        <div class="add-new-address-wrap">
          <button type="button" class="btn outline auto-width add-new-address">
            {{ 'customer.addresses.add_new' | t }}
          </button>
        </div>
      </div>
      <div class="return bottompad" style="display: none;">
        <a class="btn outline auto-width" href="{{ routes.account_url }}" title="{{ 'customer.account.return' | t }}">{{ 'customer.account.return' | t }}</a>
      </div>
      <div id="add_address" class="toppad add_new_address">
        <div class="user-name">
          <h3>{{ 'customer.addresses.add_new' | t }}</h3>
        </div>
        --- working start -----
        {{ customer.new_address | json }}
        {% form 'customer_address', customer.new_address %}
        --- working end -----
        <span class="form form-wrap">
          <label for="address_first_name_new">{{ 'customer.addresses.first_name' | t }} <span class="required">*</span></label>
          <input type="text" id="address_first_name_new" class="address_form" name="address[first_name]"
            value="{{form.first_name}}" placeholder="{{ 'customer.addresses.first_name' | t }}" autocapitalize="words"
             />
            <span class="form_error"></span>
        </span>
        <span class="form form-wrap">
          <label for="address_last_name_new">{{ 'customer.addresses.last_name' | t }} <span class="required">*</span></label>
          <input type="text" id="address_last_name_new" class="address_form" name="address[last_name]"
            value="{{form.last_name}}" placeholder="{{ 'customer.addresses.last_name' | t }}" autocapitalize="words"
             />
            <span class="form_error"></span>
        </span>
        <span class="form form-wrap">
          <label for="address_company_new">{{ 'customer.addresses.company' | t }} <span class="required">*</span></label>
          <input type="text" for="address_company_new" class="address_form" name="address[company]"
            value="{{form.company}}" placeholder="{{ 'customer.addresses.company' | t }}" autocapitalize="words" />
            <span class="form_error"></span>
        </span>
        <span class="form form-wrap">
          <label for="address_address1_new">{{ 'customer.addresses.address1' | t }} <span class="required">*</span></label>
          <input type="text" id="address_address1_new" class="address_form" name="address[address1]"
            value="{{form.address1}}" placeholder="{{ 'customer.addresses.address1' | t }}" autocapitalize="words"
             />
            <span class="form_error"></span>
        </span>
        <span class="form form-wrap">
          <label for="address_address2_new">{{ 'customer.addresses.address2' | t }}</label>
          <input type="text" id="address_address2_new" class="address_form" name="address[address2]"
            value="{{form.address2}}" placeholder="{{ 'customer.addresses.address2' | t }}" autocapitalize="words" />
            <span class="form_error"></span>
        </span>
        <span class="form drop-down">
          <label for="address_country_new">{{ 'customer.addresses.country' | t }}</label>
          <select id="address_country_new" class="address_form" name="address[country]" data-default="{{form.country}}"
            >{{ country_option_tags }}</select>
        </span>
        <span id="address_province_container_new" class="form drop-down" style="display:none">
          <label for="address_province_new">{{ 'customer.addresses.province' | t }} <span class="required">*</span></label>
          <select id="address_province_new" class="address_form" name="address[province]" data-default="{{form.province}}"
            ></select>
        </span>
        <span class="form form-wrap">
          <label for="address_city_new">{{ 'customer.addresses.city' | t }} <span class="required">*</span></label>
          <input type="text" id="address_city_new" class="address_form" name="address[city]" value="{{form.city}}"
            placeholder="{{ 'customer.addresses.city' | t }}" autocapitalize="words"  />
            <span class="form_error"></span>
        </span>
        <span class="form form-wrap">
          <label for="address_zip_new">{{ 'customer.addresses.zip' | t }} <span class="required">*</span></label>
          <input type="text" id="address_zip_new" class="address_form" name="address[zip]" value="{{form.zip}}"
            placeholder="{{ 'customer.addresses.zip' | t }}" autocapitalize="characters"  />
            <span class="form_error"></span>
        </span>
        <span class="form form-wrap">
          <label for="address_phone_new">{{ 'customer.addresses.phone' | t }} <span class="required">*</span></label>
          <input type="text" id="address_phone_new" class="address_form" name="address[phone]" value="{{form.phone}}"
            placeholder="{{ 'customer.addresses.phone' | t }}"  />
            <span class="form_error"></span>
        </span>
        <span class="form">{{ form.set_as_default_checkbox }} {{ 'customer.addresses.set_default' | t }}</span>
  
        <span>
          <button class="btn outline auto-width add-new-address" type="submit">{{ 'customer.addresses.add' | t }}</button>
          <span title="{{ 'customer.addresses.cancel' | t }}" class="add-new-address-cancel account-secondary">{{ 'customer.addresses.cancel' | t }}</span>
        </span>
        {% endform %}
      </div>
    </div>

    {% paginate customer.addresses by 10 %}
      <div class="clearfix">
        <div class="address-outer-wrapper address-view-address-outer-wrapper clearfix">
          {% for address in customer.addresses %}
            <div class="six">
              <div id="view_address_{{address.id}}" class="customer_address ">
                <div class="clearfix">
                  <div class="address-title-wrapper">
                    {{ address.street }}
                    {% if address == customer.default_address %}
                    <span class="default_address note">{{ 'customer.addresses.default' | t }}</span>
                    {% endif %}
                  </div>
                </div>
                <div class="address-wrapper">
                  {{ address | format_address | class: view_address }}
                </div>
                <div class="address-action-wrapper">
                  <span class="edit-button btn outline auto-width" data-address-id="{{ address.id }}">
                    {{ 'customer.addresses.edit' | t }}
                  </span>
                  <span class="delete-button">
                    {{ 'customer.addresses.delete' | t | delete_customer_address_link: address.id | replace: 'href', 'class="account-secondary btn outline auto-width" href' }}
                  </span>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
        <div class="address-outer-wrapper address-edit-address-outer-wrapper clearfix">
          {% for address in customer.addresses %}
            <div class="twelve">
              <div id="edit_address_{{address.id}}" class="customer-address-table " style="display:none;">
                <div class="user-name">
                  <h3>{{ 'customer.addresses.edit_address' | t }} - <b><small>{{ address.first_name }} {{ address.last_name }}</small></b></h3>
                </div>
                {% form 'customer_address', address, class:'edit-address' %}
                  <span class="form form-wrap">
                    <label for="address_first_name_{{form.id}}">{{ 'customer.addresses.first_name' | t }} <span class="required">*</span></label>
                    <input type="text" id="address_first_name_{{form.id}}" class="address_form"
                      name="address[first_name]" value="{{form.first_name}}"
                      placeholder="{{ 'customer.addresses.first_name' | t }}"/>
                    <span class="form_error"></span>
                  </span>
                  <span class="form form-wrap">
                    <label for="address_last_name_{{form.id}}">{{ 'customer.addresses.last_name' | t }} <span class="required">*</span></label>
                    <input type="text" id="address_last_name_{{form.id}}" class="address_form"
                      name="address[last_name]" value="{{form.last_name}}"
                      placeholder="{{ 'customer.addresses.last_name' | t }}" />
                    <span class="form_error"></span>
                  </span>
                  <span class="form form-wrap">
                    <label for="address_company_{{form.id}}">{{ 'customer.addresses.company' | t }} <span class="required">*</span></label>
                    <input type="text" id="address_company_{{form.id}}" class="address_form" name="address[company]"
                      value="{{form.company}}" placeholder="{{ 'customer.addresses.company' | t }}" />
                    <span class="form_error"></span>
                  </span>
                  <span class="form form-wrap">
                    <label for="address_address1_{{form.id}}">{{ 'customer.addresses.address1' | t }} <span class="required">*</span></label>
                    <input type="text" id="address_address1_{{form.id}}" class="address_form" name="address[address1]"
                      value="{{form.address1}}" placeholder="{{ 'customer.addresses.address1' | t }}" />
                    <span class="form_error"></span>
                  </span>
                  <span class="form form-wrap">
                    <label for="address_address2_{{form.id}}">{{ 'customer.addresses.address2' | t }}</label>
                    <input type="text" id="address_address2_{{form.id}}" class="address_form" name="address[address2]"
                      value="{{form.address2}}" placeholder="{{ 'customer.addresses.address2' | t }}" />
                    <span class="form_error"></span>
                  </span>
                  <span class="form drop-down">
                    <label for="address_country_{{form.id}}">{{ 'customer.addresses.country' | t }}</label>
                    <select id="address_country_{{form.id}}" class="address_country_option"
                      data-form-id="{{ form.id }}" name="address[country]" data-default="{{form.country}}">{{
                      country_option_tags }}</select>
                  </span>
                  <span id="address_province_container_{{form.id}}" class="form drop-down" style="display:none">
                    <label for="address_province_{{form.id}}">{{ 'customer.addresses.province' | t }} <span class="required">*</span></label>
                    <select id="address_province_{{form.id}}" class="address_form" name="address[province]"
                      data-default="{{form.province}}"></select>
                  </span>
                  <span class="form form-wrap">
                    <label for="address_city_{{form.id}}">{{ 'customer.addresses.city' | t }} <span class="required">*</span></label>
                    <input type="text" id="address_city_{{form.id}}" class="address_form" name="address[city]"
                      value="{{form.city}}" placeholder="{{ 'customer.addresses.city' | t }}" />
                    <span class="form_error"></span>
                  </span>
                  <span class="form form-wrap">
                    <label for="address_zip_{{form.id}}">{{ 'customer.addresses.zip' | t }} <span class="required">*</span></label>
                    <input  type="text" id="address_zip_{{form.id}}" class="address_form" name="address[zip]"
                      value="{{form.zip}}" placeholder="{{ 'customer.addresses.zip' | t }}"  />
                    <span class="form_error"></span>
                  </span>
                  <span class="form form-wrap">
                    <label for="address_phone_{{form.id}}">{{ 'customer.addresses.phone' | t }} <span class="required">*</span></label>
                    <input  type="text" id="address_phone_{{form.id}}" class="address_form" name="address[phone]"
                      value="{{form.phone}}" placeholder="{{ 'customer.addresses.phone' | t }}"  />
                    <span class="form_error"></span>
                  </span>
                  <span class="form">{{ form.set_as_default_checkbox }} {{ 'customer.addresses.set_default' | t }}</span>
                  <span>
                    <button class="btn outline auto-width" type="submit">
                      {{ 'customer.addresses.update' | t }}</button>
                      <a href="#addresses" onclick="Shopify.CustomerAddress.toggleForm({{form.id}}); return false;" title="{{ 'customer.addresses.cancel' | t }}" class="account-secondary">
                        {{ 'customer.addresses.cancel' | t }}
                      </a>
                  </span>
                {% endform %}
              </div>
            </div>
          {% endfor %}
        </div>
      </div>

      {% if paginate.pages > 1 %}
        <div class="pagination">
          <div>{%- render 'pagination', paginate: paginate -%}</div>
        </div>
      {% endif %}
    {% endpaginate %}
  </div>
</div>

<style>
  .address-view-address-outer-wrapper .customer_address{
    display: block !important;
  }
</style>


<script defer>
  Shopify.postLink = function(t, e) {
    var n = (e = e || {}).method || "post"
      , i = e.parameters || {}
      , o = document.createElement("form");
    for (var r in o.setAttribute("method", n),
    o.setAttribute("action", t),
    i) {
        var l = document.createElement("input");
        l.setAttribute("type", "hidden"),
        l.setAttribute("name", r),
        l.setAttribute("value", i[r]),
        o.appendChild(l)
    }
    document.body.appendChild(o),
    o.submit(),
    document.body.removeChild(o)
  };
  Shopify.CustomerAddress = {
    toggleForm: function(e) {
        var t = document.getElementById("edit_address_" + e)
          , s = document.getElementById("view_address_" + e);
        return t.style.display = "none" == t.style.display ? "" : "none",
        s.style.display = "none" == s.style.display ? "" : "none",
        !1
    },
    toggleNewForm: function() {
        var e = document.getElementById("add_address");
        return e.style.display = "none" == e.style.display ? "" : "none",
        !1
    },
    destroy: function(e, t) {
        confirm(t || "Are you sure you wish tdhbjho delete this address?") && Shopify.postLink("/account/addresses/" + e, {
            parameters: {
                _method: "delete"
            }
        })
      console.log("e for addeses",e);
      console.log("t for addeses",t);
    }
  };
  $(document).on("click", ".address-view-address-outer-wrapper .edit-button", function(){
    var dataTarget = $(this).data("address-id");
    $(".add_new_address").removeClass("active");
    $(".address-edit-address-outer-wrapper .customer-address-table").hide();
    $(".address-edit-address-outer-wrapper #edit_address_"+ dataTarget).show();
  })

  $(document).on("click", ".add-new-address-wrap .add-new-address, .add_new_address .account-secondary", function(){
    $(".address-edit-address-outer-wrapper .customer-address-table").hide();
    $(".add_new_address").toggleClass("active");
  })
</script>